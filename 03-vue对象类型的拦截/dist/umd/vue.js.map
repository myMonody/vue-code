{"version":3,"file":"vue.js","sources":["../../src/observer/index.js","../../src/state.js","../../src/init.js","../../src/index.js"],"sourcesContent":["class Observer{\n   constructor(value) {\n      // 使用defineProperty重新定义\n      // console.log(value)\n      this.walk(value);\n   }\n   walk(data) {\n      let keys = Object.keys(data);// 获取对象的key\n      keys.forEach(key => {\n         defineReactive(data, key, data[key]);\n      })\n   }\n}\nfunction defineReactive(data, key, value) {\n   Object.defineProperty(data, key, {\n      get() {\n         return value;\n      },\n      set(newVal) {\n         if (newVal == value) return;\n         value = newVal;\n      }\n   })\n}\nexport function observe(data) {\n   // console.log(data);\n   if (data == null || typeof data !== 'object') {\n      return;\n   }\n   return new Observer(data);\n}","import { observe } from \"./observer/index\";\nexport function initState(vm) {\n  // vm.$options\n  // console.log(vm)\n  const options = vm.$options;\n\n  // 初始化数据的过程。\n  if (options.props) {\n    initProps(vm);\n  }\n  if (options.methods) {\n    initMethods(vm);\n  }\n  if (options.data) {\n    initData(vm);\n  }\n  if (options.computed) {\n    initComputed(vm);\n  }\n  if (options.watch) {\n    initWatch(vm);\n  }\n}\nfunction initProps() {}\nfunction initMethods() {}\nfunction initData(vm) {\n  // 数据的初始化---这里的数据可能是函数，也可能是属性。\n  let data = vm.$options.data;\n   //  console.log('---', data);\n  // 如果是函数，this指向 vm\n  /*\n   data() {\n      this  ---这里指向的就是vm当前实例。\n      return {\n      \n      }\n   }\n   */\n  // 将数据防止当vm上面，让vm可以拿到data\n\n  vm._data = data = typeof data === \"function\" ? data.call(vm) : data;\n\n  // 数据的劫持方案---对象Object.defineProperty; 数组--单独处理\n  observe(data);\n}\nfunction initComputed() {}\nfunction initWatch() {}\n","import { initState } from \"./state\";\nexport function initMixin(Vue) {\n  // 初始化方法。---\n  Vue.prototype._init = function (options) {\n    // console.log(options);\n    // 吧options放到实例上去\n    const vm = this;\n    vm.$options = options;\n\n    // vue里面的核心特性-- 响应式数据原理。\n\n    // 初始化状态---将数据进行一个初始化的劫持。当我们改变数据的时候应该更新视图。\n    // vue组件中有很多状态--data props watch computed\n    initState(vm);\n  };\n}\n","// export  const fn = () => {\n// }\n// 使用构造函数来实现\n/*\noptions写法的就是将new Vue({\n   el:'#app',\n   data(){\n   return {\n     a:1\n   }\n   },\n   watch:{} 得的各类参数传递给了 Vue这个构造函数的options中。\n})\n*/\nimport { initMixin } from \"./init\";\nfunction Vue(options) {\n  //   console.log(options)\n  this._init(options); // 入口方法，做初始化操作\n}\n// 写成一个个的插件，对原型进行扩展。\ninitMixin(Vue);\n\nexport default Vue;\n"],"names":["Observer","constructor","value","walk","data","keys","Object","forEach","key","defineReactive","defineProperty","get","set","newVal","observe","initState","vm","options","$options","props","methods","initData","computed","watch","_data","call","initMixin","Vue","prototype","_init"],"mappings":";;;;;;GAAA,MAAMA,QAAN,CAAc;GACXC,EAAAA,WAAW,CAACC,KAAD,EAAQ;GAChB;GACA;GACA,SAAKC,IAAL,CAAUD,KAAV;GACF;;GACDC,EAAAA,IAAI,CAACC,IAAD,EAAO;GACR,QAAIC,IAAI,GAAGC,MAAM,CAACD,IAAP,CAAYD,IAAZ,CAAX,CADQ;;GAERC,IAAAA,IAAI,CAACE,OAAL,CAAaC,GAAG,IAAI;GACjBC,MAAAA,cAAc,CAACL,IAAD,EAAOI,GAAP,EAAYJ,IAAI,CAACI,GAAD,CAAhB,CAAd;GACF,KAFD;GAGF;;GAXU;;GAad,SAASC,cAAT,CAAwBL,IAAxB,EAA8BI,GAA9B,EAAmCN,KAAnC,EAA0C;GACvCI,EAAAA,MAAM,CAACI,cAAP,CAAsBN,IAAtB,EAA4BI,GAA5B,EAAiC;GAC9BG,IAAAA,GAAG,GAAG;GACH,aAAOT,KAAP;GACF,KAH6B;;GAI9BU,IAAAA,GAAG,CAACC,MAAD,EAAS;GACT,UAAIA,MAAM,IAAIX,KAAd,EAAqB;GACrBA,MAAAA,KAAK,GAAGW,MAAR;GACF;;GAP6B,GAAjC;GASF;;GACM,SAASC,OAAT,CAAiBV,IAAjB,EAAuB;GAC3B;GACA,MAAIA,IAAI,IAAI,IAAR,IAAgB,OAAOA,IAAP,KAAgB,QAApC,EAA8C;GAC3C;GACF;;GACD,SAAO,IAAIJ,QAAJ,CAAaI,IAAb,CAAP;GACF;;GC7BM,SAASW,SAAT,CAAmBC,EAAnB,EAAuB;GAC5B;GACA;GACA,QAAMC,OAAO,GAAGD,EAAE,CAACE,QAAnB,CAH4B;;GAM5B,MAAID,OAAO,CAACE,KAAZ,EAAmB;;GAGnB,MAAIF,OAAO,CAACG,OAAZ,EAAqB;;GAGrB,MAAIH,OAAO,CAACb,IAAZ,EAAkB;GAChBiB,IAAAA,QAAQ,CAACL,EAAD,CAAR;GACD;;GACD,MAAIC,OAAO,CAACK,QAAZ,EAAsB;;GAGtB,MAAIL,OAAO,CAACM,KAAZ,EAAmB;GAGpB;;GAGD,SAASF,QAAT,CAAkBL,EAAlB,EAAsB;GACpB;GACA,MAAIZ,IAAI,GAAGY,EAAE,CAACE,QAAH,CAAYd,IAAvB,CAFoB;GAIpB;;GACA;GACF;GACA;GACA;GACA;GACA;GACA;GACA;GACE;;GAEAY,EAAAA,EAAE,CAACQ,KAAH,GAAWpB,IAAI,GAAG,OAAOA,IAAP,KAAgB,UAAhB,GAA6BA,IAAI,CAACqB,IAAL,CAAUT,EAAV,CAA7B,GAA6CZ,IAA/D,CAfoB;;GAkBpBU,EAAAA,OAAO,CAACV,IAAD,CAAP;GACD;;GC3CM,SAASsB,SAAT,CAAmBC,GAAnB,EAAwB;GAC7B;GACAA,EAAAA,GAAG,CAACC,SAAJ,CAAcC,KAAd,GAAsB,UAAUZ,OAAV,EAAmB;GACvC;GACA;GACA,UAAMD,EAAE,GAAG,IAAX;GACAA,IAAAA,EAAE,CAACE,QAAH,GAAcD,OAAd,CAJuC;GAQvC;GACA;;GACAF,IAAAA,SAAS,CAACC,EAAD,CAAT;GACD,GAXD;GAYD;;GCfD;;GAeA,SAASW,GAAT,CAAaV,OAAb,EAAsB;GACpB;GACA,OAAKY,KAAL,CAAWZ,OAAX,EAFoB;;GAGrB;;;GAEDS,SAAS,CAACC,GAAD,CAAT;;;;;;;;"}